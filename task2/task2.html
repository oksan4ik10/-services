<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Day18Hard Animation</title>
</head>
<style>
    button{
        width: 100px;
        height: 50px;
        margin: 0px auto;
        display: block;
    }
</style>
<body>

    <button>Погнали</button>
    


    <script>
        'use strict';

            let DomElement=function(selector,height,width,bg,fontSize){
                this.selector=selector; 
                this.height=height; 
                this.width= width; 
                this.bg=bg; 
                this.fontSize=fontSize;
            
            }

            DomElement.prototype.createElem=function(text){
                let newEl,
                styles=`height:${this.height};
                        width:${this.width};
                        background-color:${this.bg};
                        font-size:${this.fontSize};
                        position:absolute`;
                if (this.selector[0]===".") newEl=document.createElement("div");
                else if (this.selector[0]==="#") newEl=document.createElement("p");
                newEl.classList.add(this.selector);
                newEl.style.cssText=styles;
                newEl.textContent=text;
                return newEl;
            }


            let elem1=new DomElement(".block","100px","100px","red","14px");

            let square1=elem1.createElem("HI")
            document.body.append(square1);
            square1.style.left="0px";

            let animeteId, left, newLeft, count=0, check=true;
            function Animate(){
                    animeteId=requestAnimationFrame(Animate);
                    
                    newLeft=count;
                    left = square1.getBoundingClientRect().x;
                    if(left+100>= document.documentElement.clientWidth) check=false
                    if (left===0) check=true;
                    check ? count++ : count--;
                    square1.style.left=newLeft+"px";  
                    
            }

          let stop = true;
            const button=document.querySelector("button");
            button.addEventListener("click",()=>{
                if (stop) {
                    animeteId=requestAnimationFrame(Animate);
                    stop=false;
                } else{
                    stop=true;
                    cancelAnimationFrame(animeteId)
                }
                

            })
   
    </script>

</body>
</html>